<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="./assets/Logo/logo-icon.png"
      type="image/x-icon"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v6.4.2/css/all.css"
    />
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="./Css/nav.css" />
    <link rel="stylesheet" href="./Css/left_sidebar.css" />
    <link rel="stylesheet" href="./Css/right_sidebar.css" />
    <link rel="stylesheet" href="./Css/maincontent.css" />
    <!-- model-viewer CDN -->
    <script
      type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/nano.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js"></script>
    <title>TerraTech 3D</title>
  </head>
  <body>
    <div class="main" id="main">
      <nav class="nav">
        <img
          src="./assets/Logo/logo.webp"
          alt="TerraTech_logo"
          class="nav_logo"
        />
        <!-- <div class="nav_title">TERRA TECH PACKS</div> -->
        <a class="login_btn" href="login.html">Login</a>
      </nav>
      <div class="content">
        <div class="left_side_bar">
          <p>Select Pattern</p>
          <div class="pattern_box">
            <div class="pattern_list">
              <ul class="accordion">
                <!-- category is injucted from js -->
              </ul>
            </div>
          </div>
          <p>Upload Logo</p>
          <div class="upload_box">
            <label for="logoUpload" class="upload-box" id="dropArea">
              <i class="fa-solid fa-cloud-arrow-up"></i>
              <p style="margin-top: 10px">Upload Logo Here</p>
              <input type="file" id="logoUpload" accept="image/*" />
            </label>
            <button class="edit_btn">Edit</button>
          </div>
          <!-- Modal -->
          <div id="editModal" class="modal">
            <div class="modal-content">
              <div class="modal_header">
                <span class="close-button"><i class="fa-solid fa-xmark"></i></span>
                <h3>Edit Logo</h3>
              </div>
              <div class="modal_body" id="model_body">
                <div id="previewWrapper" style="position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; overflow: hidden;">
                  <!-- Loader -->
                  <div id="previewLoader" style="display: none; position: absolute; top:50%; left:50%; transform: translate(-50%, -50%); z-index: 10;">
                    <div class="loader"></div>
                  </div>
                  <!-- Fabric canvas for drawing -->
                  <canvas id="fabricCanvas"></canvas>
                </div>
              </div>
              <div class="modal_footer">
                <button id="saveLogoBtn" class="save_btn">Save</button>
                <label for="uploadBtn" class="upload_btn">Upload Logo</label>
                <input type="file" id="uploadBtn" name="file" hidden accept="image/png">
              </div>
            </div>
          </div>
        </div>
        <div class="main_content">
          <div class="model">
            <div
              style="
                height: 10%;
                display: flex;
                align-items: center;
                justify-content: center;
              "
            >
              <h3 id="mainModelTitle">120ml Round Container</h3>
            </div>
            <div class="model_view">
              <model-viewer
                id="mainViewer"
                src="./assets/Model_with_logo/120ml round with logo.glb"
                alt="120ml Round Container"
                camera-controls
                auto-rotate
                exposure="1"
                rotation-per-second="90deg"
                shadow-intensity="0.5"
                disable-tap
                disable-pan
                ar
                interaction-prompt="none"
              >
              </model-viewer>
            </div>
          </div>

          <div class="model_file">
            <div class="parts">
              <select id="partSelect">
                <option selected value="lid">Lid</option>
                <option value="tub">Tub</option>
              </select>

              <div id="colorOptions" class="color-options">
                <!-- Dynamic radio buttons will be inserted here -->
              </div>
            </div>
            <div class="colour_picker">
              <label for="bgColorPicker">Background:</label>
              <div id="bgColorPicker"></div> <!-- Pickr will mount here -->
            </div>
            <div class="export">
              <select id="exportFormat">
                <option value="png">PNG</option>
                <option value="jpg">JPG</option>
                <option value="pdf">PDF</option>
              </select>
              <button id="exportBtn">Export</button>
            </div>
          </div>
        </div>
        <div class="Right_side_bar">
          <p>Select Model</p>
          <!-- thumbnails -->
          <div class="thumbs">
            <div class="thumb-grid" id="thumbGrid">
              <!-- thumbnails injected by JS -->
            </div>
          </div>
        </div>
      </div>
      <!-- Preloader Spinner -->
    <div id="preloader">
      <div class="spinner"></div>
    </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="model.js"></script>
  </body>
</html>
